# ‚úÖ –°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è

## –î–∞—Ç–∞ –¥–µ–ø–ª–æ—è
2026-01-22 00:20:00 (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

## –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ **–î–µ–ø–ª–æ–π —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω**

### –î–µ—Ç–∞–ª–∏
- **–í–µ—Ç–∫–∞:** `main`
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `https://github.com/vmakhakhei/parser_tg_bot_flats.git`
- **–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç:** `af823a8` - fix(ui): fix keyboard.append() in summary message
- **–ú–µ—Ç–æ–¥:** Push –∏–∑ –≤–µ—Ç–∫–∏ `2026-01-18-5h17` –≤ `main`

## –ß—Ç–æ –±—ã–ª–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–¥–µ–Ω–∏–π UI –∏–∑-–∑–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ InlineKeyboardMarkup** (–∫–æ–º–º–∏—Ç—ã `3f0aeff`, `3974496`, `ca8a4cc`, `af823a8`)
  - **–ü—Ä–æ–±–ª–µ–º–∞:** ValidationError InlineKeyboardMarkup –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `row_width` –∏ –º–µ—Ç–æ–¥–æ–≤ `.add()`
  - **–†–µ—à–µ–Ω–∏–µ:**
    - –£–±—Ä–∞–Ω—ã –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `row_width` –∏ –º–µ—Ç–æ–¥–æ–≤ `.add()` –≤ `bot/handlers/filters_quick.py`
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_build_safe_keyboard()` —Å fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    - –í—Å–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —è–≤–Ω—ã–π `inline_keyboard: List[List[InlineKeyboardButton]]`
    - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `[FILTER_UI]` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π —Å fallback –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö –≤—ã–∑–æ–≤–∞ `show_filters_master()`
    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `keyboard.inline_keyboard.append()` –≤ `notification_service.py`
    - –¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ `keyboard_rows` –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
  - **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
    - –ù–µ—Ç –ø–∞–¥–µ–Ω–∏–π UI –∏–∑-–∑–∞ ValidationError
    - Quick-master –≤—Å–µ–≥–¥–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
    - –õ–æ–≥–∏ `[FILTER_UI]` –≤–∏–¥–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞—Å—Ç—Ä–µ–≤–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
    - –í—Å–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ —á–µ—Ä–µ–∑ —è–≤–Ω—ã–π `inline_keyboard`
- ‚úÖ **Location autocomplete + cache + migration + parser integration** (–∫–æ–º–º–∏—Ç `984322b`)
  - **–î–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å:** `services/location_service.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –ø–æ–∏—Å–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ª–æ–∫–∞—Ü–∏–π —á–µ—Ä–µ–∑ Kufar API
  - **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¢–∞–±–ª–∏—Ü–∞ `locations_cache` –≤ Turso (TTL 30 –¥–Ω–µ–π)
  - **–ú–æ–¥–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤:** –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `city_json` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è location dict
  - **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –≤ –≤–≤–æ–¥ –≥–æ—Ä–æ–¥–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ location dict –≤ –ø–∞—Ä—Å–µ—Ä–µ Kufar
  - **–ú–∏–≥—Ä–∞—Ü–∏—è:** –°–∫—Ä–∏–ø—Ç `tools/migrate_cities.py` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - **–¢–µ—Å—Ç—ã:** Unit —Ç–µ—Å—Ç—ã `tools/tests/test_location_service.py` –∏ integration —Ç–µ—Å—Ç `tools/test_city_flow.sh`
  - **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/locations.md` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã location flow
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ UX –∏ —Ç–µ–∫—Å—Ç–æ–≤ Telegram-–±–æ—Ç–∞ KeyFlat** (–∫–æ–º–º–∏—Ç `f6e4b59`)
  - **–£–ª—É—á—à–µ–Ω `/start`:**
    - –ù–æ–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞
    - –ü–æ–∫–∞–∑ —Ç–µ–∫—É—â–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
    - –ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏: "‚öôÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã", "üìä –ö–∞–∫ —è –≤—ã–±–∏—Ä–∞—é –ª—É—á—à–∏–µ –∫–≤–∞—Ä—Ç–∏—Ä—ã", "üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–π—á–∞—Å"
    - –£–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–∞—Å—Ç–µ—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    - –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ scoring
  - **–û–±–Ω–æ–≤–ª–µ–Ω Quick Master:**
    - –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∏—Å–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä"
    - –ü–µ—Ä–µ–¥ –∫–Ω–æ–ø–∫–∞–º–∏ –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–µ–∫—É—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã
    - –ö–Ω–æ–ø–∫–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ: –ì–æ—Ä–æ–¥, –ö–æ–º–Ω–∞—Ç—ã, –¶–µ–Ω–∞, –ü—Ä–æ–¥–∞–≤–µ—Ü, –†–µ–∂–∏–º –¥–æ—Å—Ç–∞–≤–∫–∏, –ì–æ—Ç–æ–≤–æ
    - –ö–Ω–æ–ø–∫–∞ "–ì–æ—Ç–æ–≤–æ" –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –º–∞—Å—Ç–µ—Ä —Å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥–º–µ–Ω—é –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - **–£–ª—É—á—à–µ–Ω–æ Summary-—Å–æ–æ–±—â–µ–Ω–∏–µ:**
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–∞:
      - "üî• –¶–µ–Ω–∞ –Ω–∏–∂–µ —Ä—ã–Ω–∫–∞ –Ω–∞ ~X%" (–µ—Å–ª–∏ —Ü–µ–Ω–∞ –∑–∞ –º¬≤ –Ω–∏–∂–µ —Ä—ã–Ω–∫–∞ > 10%)
      - "üü¢ –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ü–µ–Ω—ã" (–µ—Å–ª–∏ —Ä–∞–∑–±—Ä–æ—Å —Ü–µ–Ω –Ω–∏–∑–∫–∏–π)
    - –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –±–ª–æ–∫–∞ –¥–æ–º–∞: –∞–¥—Ä–µ—Å, —Ü–µ–Ω–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
  - **–ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –≤ summary:**
    - "üîç –°–º–æ—Ç—Ä–µ—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã" ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    - "üìä –ü–æ—á–µ–º—É —ç—Ç–æ—Ç –¥–æ–º?" ‚Äî –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ scoring
    - "‚ùå –°–∫—Ä—ã—Ç—å –¥–æ–º" ‚Äî —Å–∫—Ä—ã–≤–∞–µ—Ç –¥–æ–º –∏–∑ summary (—Ç–æ–ª—å–∫–æ UI)
  - **–£–ª—É—á—à–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã:**
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ü–µ–Ω–∞ –∑–∞ –º¬≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `üí∞ $52 000 (~$1210/–º¬≤)`
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `calc_price_per_m2` –∏–∑ `utils/scoring`
    - –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç –≤ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö
  - **–£–ª—É—á—à–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/mode`:**
    - –ù–æ–≤—ã–π —Ç–µ–∫—Å—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ä–µ–∂–∏–º–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏
    - Inline-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ (üîπ –ö—Ä–∞—Ç–∫–æ / üîπ –ü–æ–ª–Ω–æ—Å—Ç—å—é)
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º
    - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–∂–∏–º–∞ —á–µ—Ä–µ–∑ callback
  - **–£–ª—É—á—à–µ–Ω—ã —Ç–µ–∫—Å—Ç—ã –æ—à–∏–±–æ–∫:**
    - –ó–∞–º–µ–Ω–µ–Ω–æ "‚ö†Ô∏è –£ –≤–∞—Å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã" –Ω–∞ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ "‚ÑπÔ∏è –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫, –Ω—É–∂–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã. –≠—Ç–æ –∑–∞–π–º–µ—Ç –º–µ–Ω—å—à–µ –º–∏–Ω—É—Ç—ã üëá"
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã" –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
  - **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
    - –ë–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á—É–≤—Å—Ç–≤—É–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å—Å–æ–º
    - –°–Ω–∏–∂–µ–Ω–∞ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
    - –û—â—É—â–µ–Ω–∏–µ "—É–º–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞" –≤–º–µ—Å—Ç–æ "–±–æ—Ç–∞"
    - –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –ë–î –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Railway** (–∫–æ–º–º–∏—Ç `f79801e`)
  - **–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏ –ø–∏—Å–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–π–ª `logs/app.log`, –∞ Railway —á–∏—Ç–∞–µ—Ç –ª–æ–≥–∏ –∏–∑ stdout/stderr
  - **–†–µ—à–µ–Ω–∏–µ:**
    - –û–±–Ω–æ–≤–ª–µ–Ω `error_logger.py`: –ª–æ–≥–∏ –∏–¥—É—Ç –≤ stdout (INFO+) –∏ stderr (WARNING+)
    - –§–∞–π–ª–æ–≤—ã–π handler –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ Railway)
    - –£–±—Ä–∞–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–π `logging.basicConfig()` –∏–∑ `bot.py`
    - `error_logger` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º –≤ `main.py` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    - –î–æ–±–∞–≤–ª–µ–Ω fallback –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `bot.py` –Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–±–ª–µ–º —Å error_logger
  - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –ª–æ–≥–∏ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Railway dashboard —á–µ—Ä–µ–∑ stdout/stderr
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ—Å–æ–≤ scoring** (–∫–æ–º–º–∏—Ç `95f858e`)
  - **–°–æ–∑–¥–∞–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:** `tools/score_tuning.py` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ—Å–æ–≤ scoring
  - **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** 7 –Ω–∞–±–æ—Ä–æ–≤ –≤–µ—Å–æ–≤ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (79 –æ–±—ä—è–≤–ª–µ–Ω–∏–π, 69 –≥—Ä—É–ø–ø)
  - **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:** –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `tools/score_tuning_results.json`
  - **–í—ã–±—Ä–∞–Ω –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä:** conservative (0.5, 0.3, 0.1, 0.1)
  - **–û–±–Ω–æ–≤–ª–µ–Ω `utils/scoring.py`:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–µ—Å–∞ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `SCORING_WEIGHTS`
  - **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—ã–±—Ä–∞–Ω–Ω—ã–µ –≤–µ—Å–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è `[SCORING_CONFIG]`
  - **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Å–∞—Ö:**
    - –ë—ã–ª–æ: (0.45, 0.25, 0.15, 0.15) - baseline
    - –°—Ç–∞–ª–æ: (0.5, 0.3, 0.1, 0.1) - conservative (–±–æ–ª—å—à–µ –∞–∫—Ü–µ–Ω—Ç–∞ –Ω–∞ —Ü–µ–Ω—É)
- ‚úÖ **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π scoring v1 –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –¥–æ–º–æ–≤ –≤ summary** (–∫–æ–º–º–∏—Ç `d693cc2`)
  - **–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å:** `utils/scoring.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
    - `safe_div()` - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å
    - `calc_price_per_m2()` - –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã –∑–∞ –º¬≤ –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
    - `calc_market_median_ppm()` - –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞–Ω–Ω–æ–π —Ü–µ–Ω—ã –∑–∞ –º¬≤ –ø–æ –≤—Å–µ–º—É —Ä—ã–Ω–∫—É
    - `score_group()` - –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π scoring –¥–ª—è –≥—Ä—É–ø–ø –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - **–§–æ—Ä–º—É–ª–∞ scoring (–æ–±–Ω–æ–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ auto-tune):**
    - 50% - —Ü–µ–Ω–∞ –∑–∞ –º–µ—Ç—Ä (—á–µ–º –Ω–∏–∂–µ - —Ç–µ–º –ª—É—á—à–µ) - –±—ã–ª–æ 45%
    - 30% - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç —Ä—ã–Ω–∫–∞ (—á–µ–º –±–æ–ª—å—à–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤–Ω–∏–∑ - —Ç–µ–º –ª—É—á—à–µ) - –±—ã–ª–æ 25%
    - 10% - —Ä–∞–∑–±—Ä–æ—Å —Ü–µ–Ω –≤–Ω—É—Ç—Ä–∏ –¥–æ–º–∞ (—á–µ–º –º–µ–Ω—å—à–µ —Ä–∞–∑–±—Ä–æ—Å - —Ç–µ–º –ª—É—á—à–µ) - –±—ã–ª–æ 15%
    - 10% - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (soft cap –Ω–∞ 6) - –±—ã–ª–æ 15%
  - **–û–±–Ω–æ–≤–ª–µ–Ω `send_summary_message()`:**
    - –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è `market_median_ppm` –æ–¥–∏–Ω —Ä–∞–∑ –ø–µ—Ä–µ–¥ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
    - –ì—Ä—É–ø–ø—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –Ω–æ–≤–æ–º—É –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É scoring –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–¥—Å—á–µ—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
    - –î–æ–±–∞–≤–ª–µ–Ω debug-–ª–æ–≥ `[SCORING]` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–∞ –≤ summary —Å –∞–¥—Ä–µ—Å–æ–º, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, score –∏ market_ppm
  - **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –¥–æ–º–æ–≤ –≤ summary-first —Ä–µ–∂–∏–º–µ
    - –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–∞—Ä—Å–µ—Ä—ã, –ë–î, sent_ads, —Ñ–∏–ª—å—Ç—Ä—ã, delivery_mode
    - –î–µ—à—ë–≤—ã–µ –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –¥–æ–º–∞ –∏–¥—É—Ç –≤–≤–µ—Ä—Ö, –∞–≥–µ–Ω—Ç—Å–∫–∏–π —à—É–º —É—Ö–æ–¥–∏—Ç –≤–Ω–∏–∑
    - –õ–æ–≥–∏ `[SCORING]` –æ–±—ä—è—Å–Ω—è—é—Ç –ø–æ—Ä—è–¥–æ–∫ –¥–æ–º–æ–≤ –≤ summary
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (`bot/handlers`, `bot/services`, `bot/middlewares`)
- ‚úÖ 90 unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø–∞—Ä—Å–µ—Ä–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (black, flake8, type hints)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (README —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π)
- ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø–∞—Ä—Å–µ—Ä–æ–≤
- ‚úÖ DTO –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫ –≤ –ø–∞—Ä—Å–µ—Ä–∞—Ö
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞:** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–∞–Ω–Ω—ã—Ö (`List[Listing]`)
- ‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –æ—Å–ª–∞–±–ª–µ–Ω—ã —Å—Ç—Ä–æ–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—Ç—Å–µ—á–µ–Ω–∏—è –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ‚úÖ **–ó–∞—â–∏—Ç–∞ aggregator:** –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `None`, –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ scraper'–∞
- ‚úÖ **–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** —É–ª—É—á—à–µ–Ω–∏—è –≤ search_service, database –∏ main (–∫–æ–º–º–∏—Ç `2672c33`)
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1:** –∑–∞—â–∏—Ç–∞ –æ—Ç None —Å–µ—Å—Å–∏–∏ –≤ HTTPClient (–∫–æ–º–º–∏—Ç `0805123`)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
  - –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ AttributeError –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–æ–π —Å–µ—Å—Å–∏–∏
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `'NoneType' object has no attribute 'get'` –≤ –ø–∞—Ä—Å–µ—Ä–µ Kufar
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2:** —á—Ç–µ–Ω–∏–µ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞ –≤–Ω—É—Ç—Ä–∏ async with (–∫–æ–º–º–∏—Ç `186c6bb`)
  - –ò–∑–º–µ–Ω–µ–Ω—ã –º–µ—Ç–æ–¥—ã `fetch_html()` –∏ `fetch_json()` –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞ –≤–Ω—É—Ç—Ä–∏ `async with`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `Connection closed` –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ JSON/HTML –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  - –¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ —Ç–µ–ø–µ—Ä—å —á–∏—Ç–∞–µ—Ç—Å—è –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏ —á—Ç–µ–Ω–∏—è
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3:** –æ—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫ Turso –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ (–∫–æ–º–º–∏—Ç—ã `cbee8a8`, `c163dd6`)
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `dictionary update sequence element #0 has length 15; 2 is required` –≤ `get_cached_listings_by_filters`
  - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Row –≤ —Å–ª–æ–≤–∞—Ä—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `zip(columns, row)`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ `safe_send_media_group` –∏ `safe_send_message`
  - –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∫–æ–≥–¥–∞ –Ω–µ –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–Ω–∞–π–¥–µ–Ω–æ 50+, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ~20)
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 4:** —É–±—Ä–∞–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ 20 –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ (–∫–æ–º–º–∏—Ç `74dd23e`)
  - –£–¥–∞–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `[:20]` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `search_listings_after_setup` (—Å—Ç—Ä–æ–∫–∞ 3151)
  - –£–¥–∞–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `[:20]` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `cb_send_all_listings` (—Å—Ç—Ä–æ–∫–∞ 2454)
  - –£–¥–∞–ª–µ–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `[:20]` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `cb_check_now_from_ai` (—Å—Ç—Ä–æ–∫–∞ 1639)
  - –¢–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- ‚úÖ **Unified Filter Management + Quick Wizard** (–∫–æ–º–º–∏—Ç `e3b9f19`)
  - **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤:** –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ Turso (`database_turso.py`)
  - **–ù–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ API:** `set_user_filters_turso(telegram_id: int, filters: dict)` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –º–∞—Å—Ç–µ—Ä —Ñ–∏–ª—å—Ç—Ä–æ–≤:** —Å–æ–∑–¥–∞–Ω `bot/handlers/filters_quick.py` - –æ–¥–∏–Ω —ç–∫—Ä–∞–Ω —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - **–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –ë–î:** –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–ª–æ–Ω–∫–∏ `seller_type` –∏ `delivery_mode` –≤ —Ç–∞–±–ª–∏—Ü—É `user_filters`
  - **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–∏—Å–∫–∞ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤:** –≤ `search_service.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –≥–æ—Ä–æ–¥–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø–æ–∏—Å–∫–∞
  - **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞ –≥–æ—Ä–æ–¥–∞:** –ø—Ä–∏ `/start` –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –≥–æ—Ä–æ–¥, –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è quick wizard
  - **–§–∞—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏:** –¥–æ–±–∞–≤–ª–µ–Ω—ã `[FILTER_SAVE]` –∏ `[FILTER_LOAD]` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - **–§—É–Ω–∫—Ü–∏—è `ensure_user_filters`:** –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –Ω–∞–ª–∏—á–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - **–ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ `seller_type` –∏ `delivery_mode` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ **–§–∏–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ç—á —Ñ–∏–ª—å—Ç—Ä–æ–≤: –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, quick master –±–µ–∑ FSM** (–∫–æ–º–º–∏—Ç `7517fb8`)
  - **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞–ø–∏—Å–∏:** `set_user_filters_turso(telegram_id: int, filters: dict)` - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø–∏—Å–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π quick master:** –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `bot/handlers/filters_quick.py`:
    - –ë–ï–ó FSM - –Ω–∏–∫–∞–∫–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π, —Ç–æ–ª—å–∫–æ inline-–∫–Ω–æ–ø–∫–∏
    - –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ —á–µ—Ä–µ–∑ `set_user_filters_turso`
    - –§–æ—Ä–º–∞—Ç callback: `filters:telegram_id:action:value`
    - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∂–∏–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (brief/full) —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
    - –§—É–Ω–∫—Ü–∏—è `show_filters_master()` –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–∞—Å—Ç–µ—Ä–∞
  - **–û–±–Ω–æ–≤–ª–µ–Ω `/start` flow:**
    - –í—ã–∑–æ–≤ `ensure_user_filters` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –Ω–∞–ª–∏—á–∏—è –∑–∞–ø–∏—Å–∏
    - –ï—Å–ª–∏ –≥–æ—Ä–æ–¥ –ø—É—Å—Ç - –∑–∞–ø—Ä–æ—Å –≥–æ—Ä–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–º
    - –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –≥–æ—Ä–æ–¥–∞ - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ quick master
  - **–£–ª—É—á—à–µ–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–∏—Å–∫–∞:**
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤: `[FILTER_BLOCK] search skipped: user=... no filters`
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≥–æ—Ä–æ–¥–∞: `[FILTER_BLOCK] search skipped: user=... no city`
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è min/max rooms: `[FILTER_BLOCK] search skipped: user=... no min/max rooms`
    - –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: "‚ö†Ô∏è –£ –≤–∞—Å –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã.\n–ù–∞–∂–º–∏—Ç–µ ¬´‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã¬ª"
  - **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ª–æ–≥–∏:**
    - `[FILTER_SAVE]` - –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    - `[FILTER_LOAD]` - –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ (FOUND/NOT_FOUND)
    - `[FILTER_BLOCK]` - –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –ø–æ–∏—Å–∫–∞ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - **–£–ª—É—á—à–µ–Ω `ensure_user_filters`:**
    - –ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
    - –°–æ–∑–¥–∞–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—É—é —Å—Ç—Ä–æ–∫—É –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç
  - **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
    - –§–∏–ª—å—Ç—Ä—ã –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏
    - –ù–µ—Ç FSM-—Ö–≤–æ—Å—Ç–æ–≤ - –≤—Å–µ —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏
    - –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ª–æ–≥–∏–∫–∏ - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞–ø–∏—Å–∏
    - –ü–æ–∏—Å–∫ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
    - –ö–æ–¥ —á–∏—Ç–∞–µ–º—ã–π –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∫–æ–≥–¥–∞ –Ω–∞–π–¥–µ–Ω–æ 50+ –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ ~20
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏:** —É–º–µ–Ω—å—à–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ–±—ä—è–≤–ª–µ–Ω–∏–π (–∫–æ–º–º–∏—Ç `a7211a2`)
  - –ò–∑–º–µ–Ω–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ —Å 2 —Å–µ–∫—É–Ω–¥ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É –≤ `bot.py` (5 –º–µ—Å—Ç: —Å—Ç—Ä–æ–∫–∏ 616, 1511, 1642, 2458, 3155)
  - –ò–∑–º–µ–Ω–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ —Å 2 —Å–µ–∫—É–Ω–¥ –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É –≤ `bot/services/search_service.py` (—Å—Ç—Ä–æ–∫–∞ 567)
  - –£–ª—É—á—à–µ–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±–µ–∑ —Ä–∏—Å–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Telegram API
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç Flood Control:** –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ TelegramRetryAfter –∏ per-user rate limiting (–∫–æ–º–º–∏—Ç `beb28e0`)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è `TelegramRetryAfter` –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –º–µ–¥–∏–∞–≥—Ä—É–ø–ø –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω per-user rate limiting —Å –º—è–≥–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π (`USER_SEND_LOCKS`)
  - –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ `TelegramRetryAfter` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–∞—É–∑–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –û–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–µ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ, –µ—Å–ª–∏ –±—ã–ª–∞ –ø–æ–ª—É—á–µ–Ω–∞ –æ—à–∏–±–∫–∞ flood control
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ 1.2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Ä–∏—Å–∫–∞ flood control
  - –£–ª—É—á—à–µ–Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö Telegram API
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞** (–∫–æ–º–º–∏—Ç `3278256`)
  - –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ `/start` - –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å is_active=True
  - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏
  - –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `is_active` –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Kufar: –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ —Å—Ç–∞—Ä—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π (STOP_ON_OLD_THRESHOLD = 10)
  - –î–æ–±–∞–≤–ª–µ–Ω –∂—ë—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ (MAX_PAGES_PER_RUN = 10)
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `get_latest_ad_external_id` –∏ `ad_exists` –≤ database_turso –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞ –∑–∞ —Å—á—ë—Ç —Ä–∞–Ω–Ω–µ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** (–∫–æ–º–º–∏—Ç `20f27d8`)
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ ad_id –≤ database_turso - –≤—Å–µ–≥–¥–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Ç–∏–ø–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥—Ä–µ—Å–∞ –≤ notification_service.py (assert –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è None –∞–¥—Ä–µ—Å–æ–≤)
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
  - –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è stop-on-old –≤ –ø–∞—Ä—Å–µ—Ä–µ Kufar (—Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –ë–î)
  - –£–º–µ–Ω—å—à–µ–Ω MAX_PAGES_PER_RUN –¥–æ 2 —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–∏ –ø—É—Å—Ç–æ–π –ë–î
  - –£–ª—É—á—à–µ–Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ –ë–î** (–∫–æ–º–º–∏—Ç `e5c9a5a`)
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ —Ç–∞–±–ª–∏—Ü—É apartments —á–µ—Ä–µ–∑ aggregator
  - –í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –ø–∞–º—è—Ç–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `sync_apartment_from_listing` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ª—é–±–æ–≥–æ Listing –≤ apartments
  - –§—É–Ω–∫—Ü–∏—è `sync_apartment_from_kufar` —Ç–µ–ø–µ—Ä—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (kufar, realt, domovita –∏ –¥—Ä.)
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ aggregator
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
  - –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ë–î –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –ë–î** (–∫–æ–º–º–∏—Ç `e1c70ae`)
  - –£–¥–∞–ª–µ–Ω –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –±–ª–æ–∫ finally —Å –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ sync_apartment_from_kufar
  - –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - –£–ª—É—á—à–µ–Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π: –±–∞—Ç—á–µ–≤–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** (–∫–æ–º–º–∏—Ç `953c23c`)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `sync_apartments_batch` –¥–ª—è –±–∞—Ç—á–µ–≤–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - –ò–∑–º–µ–Ω–µ–Ω aggregator –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∞—Ç—á–µ–≤–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ –æ–¥–Ω–æ–º—É
  - –í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  - –£–¥–∞–ª–µ–Ω–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
  - –£–ø—Ä–æ—â–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ aggregator - —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —É–ª—É—á—à–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** (–∫–æ–º–º–∏—Ç `c42fcd7`)
  - –í–∫–ª—é—á–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è stop-on-old –≤ –ø–∞—Ä—Å–µ—Ä–µ Kufar (STOP_ON_OLD_THRESHOLD = 5)
  - –†–∞–Ω–Ω—è—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–∏ –≤—Å—Ç—Ä–µ—á–µ —Å—Ç–∞—Ä—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `sent_ads` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `is_ad_sent_to_user_turso` –∏ `mark_ad_sent_to_user_turso` –¥–ª—è Turso –ë–î
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_new_apartments_since` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏–∑ –ë–î
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ aggregator –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `apartment_dict_to_listing` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î –≤ Listing –æ–±—ä–µ–∫—Ç—ã
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏–∑ –ë–î
  - –ò–∑–º–µ–Ω–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø `fetch_all_listings` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** (–∫–æ–º–º–∏—Ç `17bfeb6`)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `send_grouped_listings_to_user` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏–∑ –æ–¥–Ω–æ–≥–æ –¥–æ–º–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `group_similar_listings` –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–æ–º–Ω–∞—Ç
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ `normalize_address` –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤ (—É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤, –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É)
  - –ò–∑–º–µ–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `sync_apartments_batch` - —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ `inserted_ids` –≤–º–µ—Å—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö
  - –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏–∑ –æ–¥–Ω–æ–≥–æ –¥–æ–º–∞ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π: –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (inserted_ids)
  - –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–µ—Ä–µ–¥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `utils/` —Å —É—Ç–∏–ª–∏—Ç–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–¥—Ä–µ—Å–∞–º–∏
- ‚úÖ **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏ —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –∞–¥—Ä–µ—Å–æ–≤** (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–æ—Ä–º—É–ª—ã –•–∞–≤–µ—Ä—Å–∏–Ω–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `haversine_m` –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –≤ –º–µ—Ç—Ä–∞—Ö
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `split_address` –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞ –Ω–∞ —É–ª–∏—Ü—É –∏ –Ω–æ–º–µ—Ä –¥–æ–º–∞
  - –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `normalize_text` –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏: —Å–Ω–∞—á–∞–ª–∞ –ø–æ –¥–æ–º—É/–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º/—É–ª–∏—Ü–µ, –∑–∞—Ç–µ–º –≥–µ–æ-–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `make_group_key` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–µ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å —É—á–µ—Ç–æ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –∞–¥—Ä–µ—Å–∞
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `_extract_coords_from_listing` –∏ `_extract_city_from_listing` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –≥–æ—Ä–æ–¥–∞
  - –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `apartment_dict_to_listing` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è raw_json –∏ city –∫–∞–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
  - –ü–æ—Ä–æ–≥ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ 80 –º–µ—Ç—Ä–æ–≤ (GEO_THRESHOLD_METERS)
  - –ò–∑–º–µ–Ω–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø `group_similar_listings` - —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø –≤–º–µ—Å—Ç–æ —Å–ª–æ–≤–∞—Ä—è
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ –¥–æ–º—É –±–µ–∑ —É—á–µ—Ç–∞ –∫–æ–º–Ω–∞—Ç** (–∫–æ–º–º–∏—Ç `cc40dac`)
  - –£–±—Ä–∞–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç –∏–∑ –∫–ª—é—á–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ - –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å —Ä–∞–∑–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–æ–º–Ω–∞—Ç –≤ –æ–¥–Ω–æ–º –¥–æ–º–µ —Ç–µ–ø–µ—Ä—å –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –æ–¥–Ω—É –≥—Ä—É–ø–ø—É
  - –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `send_grouped_listings_to_user` - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω –∫–æ–º–Ω–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, "2‚Äì3 –∫–æ–º–Ω–∞—Ç—ã") –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
  - –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏: –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –∞–¥—Ä–µ—Å—É (–¥–æ–º/–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã/—É–ª–∏—Ü–∞), –±–µ–∑ —É—á–µ—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–Ω–∞—Ç
  - –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–≤–∞—Ä—Ç–∏—Ä –≤ –æ–¥–Ω–æ–º –¥–æ–º–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–º–Ω–∞—Ç
- ‚úÖ **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏** (–∫–æ–º–º–∏—Ç `ede47c8`)
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: `sql/diagnostic_queries.sql` –∏ `tools/diagnostic_address_seller_report.py` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –ø–æ –∞–¥—Ä–µ—Å–∞–º
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ vendor (agency/seller) –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö - —Ç–µ–ø–µ—Ä—å –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ –ø—Ä–æ–¥–∞–≤—Ü–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—à–µ–¥—à–µ–≥–æ —Ñ–∏–ª—å—Ç—Ä—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è
  - –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `scrapers/aggregator_utils.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è signature-based –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏:
    - `normalize_price()` - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ü–µ–Ω—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    - `photos_signature()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∏–∑ —Ñ–æ—Ç–æ
    - `build_listing_signature()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –æ–±—ä—è–≤–ª–µ–Ω–∏—è (–∞–¥—Ä–µ—Å + vendor + —Ü–µ–Ω–∞ + —ç—Ç–∞–∂ + –ø–ª–æ—â–∞–¥—å + —Ñ–æ—Ç–æ)
    - `dedupe_by_signature()` - –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –ø–æ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—á—Ç–∏-–∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
  - –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `dedupe_by_signature()` –≤ aggregator –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–æ ID
  - –£–ª—É—á—à–µ–Ω—ã –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è: –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∫–∞–∑ —Ç–æ–ø-3 –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –î–æ–±–∞–≤–ª–µ–Ω–æ debug-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `send_grouped_listings_to_user()` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –≥—Ä—É–ø–ø –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç "[–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã]" –≤ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ –≥—Ä—É–ø–ø –æ–±—ä—è–≤–ª–µ–Ω–∏–π** (–∫–æ–º–º–∏—Ç `a4125d6`)
  - –ó–∞–º–µ–Ω–µ–Ω–æ debug-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –¥–µ—Ç–∞–ª—å–Ω—ã–π info-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `send_grouped_listings_to_user()`
  - –î–æ–±–∞–≤–ª–µ–Ω –æ–±—â–∏–π –∞–Ω–∞–ª–∏–∑ –≥—Ä—É–ø–ø—ã: –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∞–¥—Ä–µ—Å, –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ (`[GROUP_ANALYSIS]`)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–æ–¥–∞–≤—Ü—É: –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥–∞–≤—Ü–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω –∏ –ø–ª–æ—â–∞–¥–µ–π (`[GROUP_VENDOR]`)
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö: –≤—Å–µ —Å–ª—É—á–∞–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è vendor —Ç–µ–ø–µ—Ä—å –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ "UNKNOWN" –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è
  - –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –ª–æ–≥–æ–≤
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∏ summary-—Ä–µ–∂–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** (–∫–æ–º–º–∏—Ç `cca6487`)
  - –£–ª—É—á—à–µ–Ω–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –≤ `aggregator_utils.py`:
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `normalize_area()` –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–ª–æ—â–∞–¥–∏ (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ 0.5 –º¬≤)
    - –£–ª—É—á—à–µ–Ω–∞ `normalize_price()` - —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç int –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    - –£–ª—É—á—à–µ–Ω–∞ `photos_signature()` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä limit –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏
    - –£–ª—É—á—à–µ–Ω–∞ `build_listing_signature()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SHA1 –≤–º–µ—Å—Ç–æ MD5, –¥–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ title+area+floor –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ñ–æ—Ç–æ
    - –£–ª—É—á—à–µ–Ω–∞ `dedupe_by_signature()` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ vendor+house+—Ü–µ–Ω–∞+–ø–ª–æ—â–∞–¥—å (—Ä–∞–∑–Ω–∏—Ü–∞ —Ü–µ–Ω—ã < 5%, —Ä–∞–∑–Ω–∏—Ü–∞ –ø–ª–æ—â–∞–¥–∏ < 1.0 –º¬≤)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `extract_vendor_from_listing()` –≤ aggregator.py –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è vendor –∏–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –£–ª—É—á—à–µ–Ω–∞ `make_group_key()` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ vendor –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ `GROUP_BY_VENDOR_FOR_ADDRESS`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ config.py:
    - `GROUP_BY_VENDOR_FOR_ADDRESS` - –≤–∫–ª—é—á–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –ø—Ä–æ–¥–∞–≤—Ü—É –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –¥—É–±–ª–µ–π
    - `MAX_GROUPS_IN_SUMMARY` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–ø–ø –≤ summary-—Å–æ–æ–±—â–µ–Ω–∏–∏
    - `DELIVERY_MODE_DEFAULT` - —Ä–µ–∂–∏–º –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (brief/full)
  - –î–æ–±–∞–≤–ª–µ–Ω summary-—Ä–µ–∂–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
    - –§—É–Ω–∫—Ü–∏—è `notify_users_about_new_apartments_summary()` - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç summary-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω—ã—Ö
    - –§—É–Ω–∫—Ü–∏—è `send_summary_message()` - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ summary-—Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –∞–¥—Ä–µ—Å–∞–º
    - –§—É–Ω–∫—Ü–∏—è `get_listings_for_house_hash()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ hash –∞–¥—Ä–µ—Å–∞ –¥–ª—è callback-–∫–Ω–æ–ø–æ–∫
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø –≤ `send_grouped_listings_to_user()` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–∞–∂–¥–æ–º –æ–±—ä—è–≤–ª–µ–Ω–∏–∏
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ vendor –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö - —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è vendor (–∏–ª–∏ UNKNOWN)
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –≤ aggregator.py –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ summary-—Ä–µ–∂–∏–º–∞: scoring –≥—Ä—É–ø–ø –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è** (–∫–æ–º–º–∏—Ç `88ef598`)
  - –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `config/constants.py` –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç (–ø–æ–∑–∂–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ `constants/constants.py`)
    - `MAX_GROUPS_IN_SUMMARY` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–ø–ø –≤ summary
    - `MAX_LISTINGS_PER_GROUP_PREVIEW` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
    - `DELIVERY_MODE_BRIEF`, `DELIVERY_MODE_FULL`, `DELIVERY_MODE_DEFAULT` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ä–µ–∂–∏–º–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç** (–∫–æ–º–º–∏—Ç `f7b6e69`)
  - –ü–µ—Ä–µ–º–µ—â–µ–Ω –º–æ–¥—É–ª—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç –∏–∑ `config/constants.py` –≤ `constants/constants.py` –¥–ª—è –ª—É—á—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ `notification_service.py` –∏ `config.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—É—Ç–∏ `constants.constants`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç BOT_TOKEN –≤ `aggregator.py` - –¥–æ–±–∞–≤–ª–µ–Ω –∞–ª–∏–∞—Å TELEGRAM_BOT_TOKEN –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
  - –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `constants/`
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** (–∫–æ–º–º–∏—Ç `eb23f61`)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `upsert_user()` –≤ database_turso.py –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
    - –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ users
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ user_filters —Å active=1
    - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ username –∏ last_activity
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
    - –í notification_service.py –∏–∑–º–µ–Ω–µ–Ω —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–∞ –Ω–∞ `[SUMMARY] found {count} active users`
    - –í search_service.py –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ logger.info
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ notification_service.py –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ start.py - –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ upsert_user() –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–µ /start
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∏—è –≤ database_turso.py** (–∫–æ–º–º–∏—Ç `cea0f1d`)
  - –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `upsert_user()` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å SQLite/Turso –±–µ–∑ ON CONFLICT:
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è INSERT –∏ UPDATE –≤–º–µ—Å—Ç–æ ON CONFLICT
    - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ user_filters
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
  - –£–ª—É—á—à–µ–Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **DEBUG —Ä–µ–∂–∏–º –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** (–∫–æ–º–º–∏—Ç `83fd0b6`)
  - –î–æ–±–∞–≤–ª–µ–Ω DEBUG —Ä–µ–∂–∏–º –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ sent_ads)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `DEBUG_FORCE_RUN` –≤ constants/constants.py
  - –î–æ–±–∞–≤–ª–µ–Ω –º–æ–¥—É–ª—å `bot/handlers/debug.py` —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `get_debug_force_run()` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DEBUG —Ä–µ–∂–∏–º–æ–º
  - –î–æ–±–∞–≤–ª–µ–Ω –º–æ–¥—É–ª—å `bot/utils/admin.py` –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
  - –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `notify_users_about_new_apartments_summary()` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `force` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ DEBUG —Ä–µ–∂–∏–º–∞ –≤ `send_listing_to_user()` - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É sent_ads –≤ DEBUG —Ä–µ–∂–∏–º–µ
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ search_service.py —Å –≤—ã–≤–æ–¥–æ–º —Å–ø–∏—Å–∫–∞ ID
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —è–≤–Ω—ã–µ –ª–æ–≥–∏ `[DEBUG RUN]` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è DEBUG —Ä–µ–∂–∏–º–∞
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ DEBUG —Ä–µ–∂–∏–º–∞ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** (–∫–æ–º–º–∏—Ç `f81ead0`)
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ bot/handlers/debug.py:
    - `get_debug_ignore_sent_ads()` - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ sent_ads
    - `get_debug_bypass_summary()` - –æ–±—Ö–æ–¥ summary —Ä–µ–∂–∏–º–∞
  - –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `notify_users_about_new_apartments_summary()`:
    - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `bypass_summary` –¥–ª—è –æ–±—Ö–æ–¥–∞ summary —Ä–µ–∂–∏–º–∞
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `debug_bypass_summary` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–ª–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ DEBUG —Ä–µ–∂–∏–º–µ
    - –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `debug_ignore_sent_ads`
  - –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_new_listings()`:
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `force_send`, `ignore_sent_ads`, `bypass_summary`
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `debug_ignore_sent_ads` –≤ `send_listing_to_user()` –∏ search_service.py
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏ `[FILTER_STATE]` –∏ `[CRITICAL]` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö
  - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –≤ database.py –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - –£–ª—É—á—à–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /debug - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç check_new_listings —Å —Ñ–ª–∞–≥–∞–º–∏ –¥–ª—è DEBUG —Ä–µ–∂–∏–º–∞
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ —Å—Ö–µ–º—ã –ë–î** (–∫–æ–º–º–∏—Ç `9fe8461`)
  - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ search_service.py:
    - –í–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã"
    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –º–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ callback "setup_filters"
    - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –∏–∑–º–µ–Ω–µ–Ω —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–∞ —Å `[CRITICAL]` –Ω–∞ `[FILTER_STATE]` –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - –£–ª—É—á—à–µ–Ω–∞ —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã user_filters –≤ database_turso.py:
    - –ò–∑–º–µ–Ω–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã: —Ç–µ–ø–µ—Ä—å `telegram_id` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ PRIMARY KEY –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ `id`
    - –£–ø—Ä–æ—â–µ–Ω–∞ —Å—Ö–µ–º–∞: —É–¥–∞–ª–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–ª—è, —É–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–æ–Ω–æ–∫
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: —Ñ—É–Ω–∫—Ü–∏—è `get_user_filters_turso()` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ –Ω–æ–≤—É—é —Å—Ö–µ–º—É (telegram_id), —Ç–∞–∫ –∏ —Å—Ç–∞—Ä—É—é (user_id)
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
    - –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PRIMARY KEY –Ω–∞ telegram_id
  - –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤ main.py:
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ —É –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º initial search
    - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤, initial search –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏
    - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
    - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω –∑–∞–ø—É—Å–∫ –ø–æ–∏—Å–∫–∞ –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã user_filters** (–∫–æ–º–º–∏—Ç `3e31372`)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `migrate_user_filters_schema()` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã user_filters:
    - –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ä–æ–π —Å—Ö–µ–º—ã (user_id, rooms JSON) –Ω–∞ –Ω–æ–≤—É—é (telegram_id –∫–∞–∫ PRIMARY KEY, min_rooms, max_rooms)
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö
    - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è JSON –º–∞—Å—Å–∏–≤–∞ rooms –≤ min_rooms –∏ max_rooms
    - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (city, min_price, max_price, is_active)
    - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å –æ—Ç–∫–∞—Ç–æ–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
    - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ user_filters_old –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
    - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ `ensure_tables_exist()`:
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Å—Ç–∞—Ä–æ–π —Å—Ö–µ–º—ã
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –Ω–æ–≤–æ–π —Å—Ö–µ–º—ã –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞–µ–≤ —Å –ø—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã
  - –£–ª—É—á—à–µ–Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:
    - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä–æ–π —Å—Ö–µ–º–æ–π
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
    - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ **–ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –∑–∞–º–µ–Ω–∞ user_id –Ω–∞ telegram_id** (–∫–æ–º–º–∏—Ç `d8bf3e8`)
  - –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞–Ω—ã –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `user_id`, –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `telegram_id` –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü –ë–î:
    - –¢–∞–±–ª–∏—Ü–∞ `users`: `telegram_id` –∫–∞–∫ PRIMARY KEY –≤–º–µ—Å—Ç–æ `user_id`, –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `is_active`
    - –¢–∞–±–ª–∏—Ü–∞ `user_filters`: `telegram_id` –∫–∞–∫ PRIMARY KEY, —É–±—Ä–∞–Ω—ã –ø–æ–ª—è `user_id` –∏ `rooms` (JSON)
    - –¢–∞–±–ª–∏—Ü–∞ `sent_ads`: `telegram_id` –≤–º–µ—Å—Ç–æ `user_id` (TEXT)
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã `assert_no_user_id_columns()` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∫–æ–ª–æ–Ω–æ–∫ `user_id`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã:
    - `SELECT`, `INSERT`, `UPDATE`, `WHERE`, `ON CONFLICT` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `telegram_id`
    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏: `upsert_user`, `get_active_users`, `get_user_filters_turso`, `set_user_filters_turso`
    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å `sent_ads`: `is_ad_sent_to_user_turso`, `mark_ad_sent_to_user_turso`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `callback.state` –≤ aiogram v3:
    - –í `bot/handlers/start.py` —Ñ—É–Ω–∫—Ü–∏—è `cb_setup_filters` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `state: FSMContext` –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä
- ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ sent_ads ‚Üî apartments –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è ID** (–∫–æ–º–º–∏—Ç `94e45ba`)
- ‚úÖ **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ database_turso** (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π)
  - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤:
    - –í—Å–µ –≤—ã–∑–æ–≤—ã `set_user_filters` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `set_user_filters_turso` –∏–∑ `database_turso.py`
    - –§–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥ –º–∞—Å—Ç–µ—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (`bot.py` —Å—Ç—Ä–æ–∫–∞ 2074) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `set_user_filters_turso`
    - –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `set_user_filters` –∏–∑ `database.py` - –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∏–º–ø–æ—Ä—Ç–∞—Ö
    - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã –≤ `bot.py` (11 –º–µ—Å—Ç), `bot/handlers/start.py` (1 –º–µ—Å—Ç–æ), `bot/handlers/search.py` (2 –º–µ—Å—Ç–∞)
  - –ì–∞—Ä–∞–Ω—Ç–∏—è —á—Ç–µ–Ω–∏—è –∏–∑ —Ç–æ–π –∂–µ –ë–î:
    - `bot/services/search_service.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `get_user_filters_turso` –∏–∑ `database_turso.py`
    - –ù–∏–∫–∞–∫–∏—Ö fallback'–æ–≤ –Ω–∞ SQLite, –Ω–∏–∫–∞–∫–∏—Ö `database.py`
    - –ò–º–ø–æ—Ä—Ç: `from database_turso import get_user_filters_turso, has_valid_user_filters`
  - –§–∞—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏:
    - –í `set_user_filters_turso()` –¥–æ–±–∞–≤–ª–µ–Ω –ª–æ–≥: `[FILTER_SAVE] telegram_id=%s city=%s rooms=%s-%s price=%s-%s seller_type=%s`
    - –í `get_user_filters_turso()` –¥–æ–±–∞–≤–ª–µ–Ω –ª–æ–≥: `[FILTER_LOAD] telegram_id=%s result=%s` (FOUND/NONE)
    - –õ–æ–≥–∏ –ø–æ–º–æ–≥–∞—é—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º/–∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–∏—Å–∫–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤:
    - –í `bot/services/search_service.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã –Ω–µ –≤–∞–ª–∏–¥–Ω—ã, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    - –°–æ–æ–±—â–µ–Ω–∏–µ: "‚ö†Ô∏è –§–∏–ª—å—Ç—Ä—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –∑–∞–Ω–æ–≤–æ."
    - –ü–æ–∏—Å–∫ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
    - –í `set_user_filters_turso()` –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `seller_type` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
    - –í—Å–µ –≤—ã–∑–æ–≤—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `active=True/False` –≤–º–µ—Å—Ç–æ `is_active=True/False` –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–∏–≥–Ω–∞—Ç—É—Ä–µ
  - –†–µ–∑—É–ª—å—Ç–∞—Ç:
    - –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ Turso —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞
    - –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ Turso
    - –õ–æ–≥–∏ `[FILTER_SAVE]` –∏ `[FILTER_LOAD]` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–∞–∂–¥–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤
    - –ü–æ–∏—Å–∫ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏–ª–∏ –Ω–µ –≤–∞–ª–∏–¥–Ω—ã
  - –£–ª—É—á—à–µ–Ω–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è ID –≤ `scrapers/utils/id_utils.py`:
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ —è–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `None` –¥–ª—è `telegram_id` —Å —è–≤–Ω—ã–º `ValueError`
    - –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Å `from e` –¥–ª—è –ª—É—á—à–µ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –æ—à–∏–±–æ–∫
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ scheduler –≤ `main.py`:
    - –ó–∞–º–µ–Ω–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä `next_run_time` –Ω–∞ `start_date` –≤ —Ç—Ä–∏–≥–≥–µ—Ä–µ `IntervalTrigger`
    - –û–±–Ω–æ–≤–ª–µ–Ω `datetime.utcnow()` –Ω–∞ `datetime.now(timezone.utc)` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å APScheduler 4.x –∏ Python 3.12+
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ apartments –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π sent_ads –≤ `database.py` –∏ `database_turso.py`:
    - –§—É–Ω–∫—Ü–∏–∏ `is_ad_sent_to_user*` —Ç–µ–ø–µ—Ä—å —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ `apartments`
    - –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ apartments –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è `[sent_check][STALE]` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `False`
    - –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ apartments
    - –§—É–Ω–∫—Ü–∏–∏ `mark_ad_sent_to_user*` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `CURRENT_TIMESTAMP` –≤–º–µ—Å—Ç–æ `datetime.now().isoformat()`
    - SQL –∑–∞–ø—Ä–æ—Å—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ö–µ–º–µ —Ç–∞–±–ª–∏—Ü (SQLite: `user_id`, Turso: `telegram_id`)
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ `_process_user_listings_normal_mode()` –≤ `bot/services/search_service.py`:
    - –î–æ–±–∞–≤–ª–µ–Ω—ã keyword-only –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `ignore_sent_ads`, `force_send`, `bypass_summary`
    - –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É "unexpected keyword argument" –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –∏–∑ scheduler
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –≤ `bot/handlers/admin.py`:
    - `/admin_check_sync` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ sent_ads –∏ apartments
    - `/admin_cleanup_stale` - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–µ–π–ª –∑–∞–ø–∏—Å–µ–π (–∑–∞–ø–∏—Å–µ–π –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö apartments)
    - `/admin_list_stale_sent` - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–µ–π–ª –∑–∞–ø–∏—Å–µ–π
    - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `list_stale_sent_ads()`, `cleanup_stale_sent_ads()`, `check_sent_ads_sync()` –≤ `database_turso.py`
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ `[sent_check]` —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ ID –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º `already_sent`
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ `[sent_check][STALE]` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ `[sent_check][DEBUG]` –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ `[sent_check][ERROR]` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ `[search][skip]` –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
  - –í—Å–µ –≤—ã–∑–æ–≤—ã `is_ad_sent_to_user()` –∏ `mark_ad_sent_to_user()` –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
    - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã `telegram_id=` –∏ `ad_external_id=`
    - –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `normalize_ad_id()` –∏ `normalize_telegram_id()`
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü –ù–ï –∏–∑–º–µ–Ω–µ–Ω–∞ - —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ apartments –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è ID
    - –£–±—Ä–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `callback.state` (–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ aiogram v3)
  - –£–ª—É—á—à–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã:
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ `user_id` ‚Üí `telegram_id` –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è `user_id`
  - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å `telegram_id` –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç telegram_id, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î** (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π)
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü:
    - `migrate_users_schema()` - –º–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã users (user_id ‚Üí telegram_id –∫–∞–∫ PRIMARY KEY)
    - `migrate_user_filters_schema()` - –º–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã user_filters (—É–ª—É—á—à–µ–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞)
    - `migrate_sent_ads_schema()` - –º–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã sent_ads (user_id TEXT ‚Üí telegram_id INTEGER)
  - –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
    - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ `_old` –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
    - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ö–µ–º–æ–π
    - –ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö (best-effort —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫)
    - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π —Ç–∞–±–ª–∏—Ü—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
    - –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã `assert_no_legacy_user_id_columns()`:
    - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π –≤ `ensure_tables_exist()`
    - Fail-fast –ø–æ–¥—Ö–æ–¥: –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç RuntimeError –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫–æ–ª–æ–Ω–æ–∫ `user_id`
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∞–±–ª–∏—Ü—ã: users, user_filters, sent_ads
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –µ–¥–∏–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞:
    - `upsert_user()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `telegram_id`, —É–±—Ä–∞–Ω—ã `first_name`, `last_name`, `last_activity`
    - `create_or_update_user()` - —É–ø—Ä–æ—â–µ–Ω–∞ —Å—Ö–µ–º–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ `telegram_id` –∏ `username`
    - `set_user_filters_turso()` - –Ω–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞: `city`, `min_rooms`, `max_rooms` –≤–º–µ—Å—Ç–æ `rooms`, `region`
    - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `database.py` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è (`user_id` ‚Üí `telegram_id` –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö)
  - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
    - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–∫–∞—Ç–∞
  - –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
    - –í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–π –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ users: —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞** (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π)
  - –£–ª—É—á—à–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `migrate_users_schema()`:
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–æ–ª–æ–Ω–æ–∫ (`username`, `is_active`) –ø–µ—Ä–µ–¥ SELECT
    - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ SELECT –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–ª–æ–Ω–æ–∫
    - –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ö–µ–º
  - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã users:
    - –£–±—Ä–∞–Ω–æ –ø–æ–ª–µ `updated_at` (–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ `created_at`)
    - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: `telegram_id INTEGER PRIMARY KEY`, `username TEXT`, `is_active INTEGER DEFAULT 1`, `created_at TEXT DEFAULT CURRENT_TIMESTAMP`
    - –ù–∏–∫–∞–∫–∏—Ö `id AUTOINCREMENT`, –Ω–∏–∫–∞–∫–∏—Ö `user_id`
  - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –º–∏–≥—Ä–∞—Ü–∏–∏:
    - –î–æ–±–∞–≤–ª–µ–Ω `logger.critical("[migration] USERS MIGRATION FAILED", exc_info=e)` –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
    - Fail-fast –ø–æ–¥—Ö–æ–¥: –±–æ—Ç –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ –º–∏–≥—Ä–∞—Ü–∏–∏
    - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏: `[migration] users schema migrated successfully`
  - –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω initial search:
    - –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤—ã–∑–æ–≤ `await run_search_once(bot)` –≤ `main.py`
    - –ü—Ä–∏—á–∏–Ω–∞: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ `/start`, –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ `users` –∏ `user_filters`
    - –ë—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç set_user_filters: –∑–∞–º–µ–Ω–∞ user_id –Ω–∞ telegram_id** (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π)
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ `set_user_filters` –≤ `database.py`:
    - –î–æ–±–∞–≤–ª–µ–Ω `*` –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ –¥–ª—è keyword-only –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    - –ó–∞—â–∏—Ç–∞ –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `user_id` —á–µ—Ä–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ keyword-only –∞—Ä–≥—É–º–µ–Ω—Ç—ã
    - –í—Å–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –∫–∞–∫ `telegram_id=...`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `set_user_filters`:
    - `bot/handlers/start.py`: 1 –≤—ã–∑–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (`user_id` ‚Üí `telegram_id`)
    - `bot.py`: 12 –≤—ã–∑–æ–≤–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (–≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `telegram_id=user_id`)
    - `bot/handlers/search.py`: 2 –≤—ã–∑–æ–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
    - –í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 15+ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `set_user_filters_turso` –≤ `database.py`:
    - –û–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 701 –∏ 926) —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞—é—Ç `telegram_id` –≤–º–µ—Å—Ç–æ `user_id`
    - –î–æ–±–∞–≤–ª–µ–Ω `*` –¥–ª—è keyword-only –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å `database_turso.py`
    - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `rooms` –≤ `min_rooms`/`max_rooms` –¥–ª—è –Ω–æ–≤–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä—ã
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `set_user_filters_turso` –≤ `bot.py`:
    - –í—ã–∑–æ–≤ –≤ `sync_user_filters_to_turso` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `telegram_id=user_id`
  - –†–µ–∑—É–ª—å—Ç–∞—Ç:
    - –ù–∏ –æ–¥–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Å `user_id=` –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å
    - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `user_id` —á–µ—Ä–µ–∑ keyword-only –∞—Ä–≥—É–º–µ–Ω—Ç—ã
    - –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `telegram_id` –≤–æ –≤—Å–µ–º –∫–æ–¥–µ
- ‚úÖ **–û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤: —Ç–æ–ª—å–∫–æ Turso, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ filters=None** (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π)
  - –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ Turso):
    - –ó–∞–º–µ–Ω–µ–Ω `get_user_filters()` –Ω–∞ `get_user_filters_turso()` –≤ `search_service.py`
    - –£–¥–∞–ª–µ–Ω fallback –Ω–∞ SQLite - —Ç–æ–ª—å–∫–æ Turso –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    - –ò–º–ø–æ—Ä—Ç: `from database_turso import get_user_filters_turso`
    - –ù–∏–∫–∞–∫–∏—Ö fallback-–æ–≤, –Ω–∏–∫–∞–∫–∏—Ö try/except –¥–ª—è SQLite
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `filters is None`:
    - –≠—Ç–æ –æ—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    - –î–æ–±–∞–≤–ª–µ–Ω –ª–æ–≥: `[FILTER_BUG] user={telegram_id} is active but filters=None ‚Äî DB inconsistency`
    - –í—ã–∑–æ–≤ `_send_setup_filters_message()` –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –º–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - DEBUG run –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã:
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ `force_send` –∏ `debug_force_run` –∏–∑ `bot/handlers/debug.py`
    - –ü—Ä–∏ `force_send=True` –∏–ª–∏ `debug_force_run=True` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
    - –õ–æ–≥: `[FILTER_FAILSAFE] forcing default filters for DEBUG run`
  - –ü–æ–∏—Å–∫ –ø–æ—Å–ª–µ –º–∞—Å—Ç–µ—Ä–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤:
    - –í `cb_filters_done` –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `check_new_listings()` —Å `force_send=True`
    - –ü–æ–∏—Å–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
    - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∂–¥–µ—Ç 30 –º–∏–Ω—É—Ç scheduler –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤:
    - –î–æ–±–∞–≤–ª–µ–Ω –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ª–æ–≥: `[FILTER_DUMP] user={telegram_id} filters={filters} source=TURSO`
    - –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (TURSO) –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º
  - –í—Ä–µ–º–µ–Ω–Ω—ã–π fail-safe:
    - –ü—Ä–∏ `filters=None` –≤ DEBUG —Ä–µ–∂–∏–º–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
    - –ó–∞—â–∏—Ç–∞ –æ—Ç "–º—ë—Ä—Ç–≤–æ–≥–æ" –±–æ—Ç–∞ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ë–î
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_send_setup_filters_message()`:
    - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã"
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ `filters=None` —É –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ï–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤: has_valid_user_filters** (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π)
  - –°–æ–∑–¥–∞–Ω–∞ –µ–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤:
    - –§—É–Ω–∫—Ü–∏—è `has_valid_user_filters()` –≤ `database_turso.py`
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: `filters` –Ω–µ None, –µ—Å—Ç—å `city` (–Ω–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞), `min_rooms` –∏ `max_rooms` –∑–∞–¥–∞–Ω—ã
    - –ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–æ –≤—Å–µ–º –∫–æ–¥–µ
  - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤:
    - –í `search_service.py` –∑–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `if not filters` –Ω–∞ `has_valid_user_filters(filters)`
    - –£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `validate_user_filters()` –≤ —Ü–∏–∫–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ startup-–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `main.py`:
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `get_user_filters_turso()` –≤–º–µ—Å—Ç–æ `get_user_filters()`
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `has_valid_user_filters()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: `[startup] ‚ùå Active users without valid filters: {users_without_filters}`
    - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
  - DEBUG run –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤:
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `_debug_skip_filter_validation` –≤ `debug.py`
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_debug_skip_filter_validation()`
    - –ü—Ä–∏ `skip_filter_validation=True` –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
    - –õ–æ–≥: `[DEBUG] Skipping filter validation`
    - `/debug run` —Ç–µ–ø–µ—Ä—å —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - –§–∏–Ω–∞–ª—å–Ω—ã–π –ª–æ–≥ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
    - –î–æ–±–∞–≤–ª–µ–Ω –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ª–æ–≥: `[SEARCH_ENTRY] user={user_id} filters_valid={filters_valid}`
    - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
    - –û–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –≥–¥–µ –ª–æ–≥–∏–∫–∞ –ª–æ–º–∞–µ—Ç—Å—è
  - –†–µ–∑—É–ª—å—Ç–∞—Ç:
    - –§–∏–ª—å—Ç—Ä—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ ¬´–ø—Ä–æ–ø–∞–¥–∞—Ç—å¬ª - –µ–¥–∏–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
    - Initial search –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
    - Scheduled search –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è - –µ–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
    - `/debug run` —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤
    - Summary-first –ª–æ–≥–∏–∫–∞ –ø—Ä–æ—è–≤–∏–ª–∞—Å—å –≤ UI - —Ñ–∏–ª—å—Ç—Ä—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è sent_ads** (–∫–æ–º–º–∏—Ç `f70b754`)
  - –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `scrapers/utils/id_utils.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:
    - `normalize_ad_id()` - –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤–Ω–µ—à–Ω–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏—è (str, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
    - `normalize_telegram_id()` - –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç telegram_id (int, —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)
  - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ –≤—Å–µ—Ö DB-—Ñ—É–Ω–∫—Ü–∏—è—Ö:
    - `is_ad_sent_to_user()` –∏ `mark_ad_sent_to_user()` –≤ `database.py`
    - `is_ad_sent_to_user_turso()` –∏ `mark_ad_sent_to_user_turso()` –≤ `database_turso.py`
    - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ SQL-–∑–∞–ø—Ä–æ—Å–∞–º–∏
  - –ï–¥–∏–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—ã–∑–æ–≤–æ–≤:
    - –í—Å–µ –≤—ã–∑–æ–≤—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã: `is_ad_sent_to_user(telegram_id=tg, ad_external_id=ad_key)`
    - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã –≤ `search_service.py`, `notification_service.py`, `aggregator.py`
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ sent_ads:
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ `[sent_check]` —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ ID –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º `already_sent`
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ `[search][skip]` –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º `[sent_check][ERROR]`
  - –£–ª—É—á—à–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ DEBUG run:
    - –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `skip_filter_validation` –≤ `debug.py`
    - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ `[debug_run]` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∑–∞–ø—É—Å–∫–∞
    - –£—á–µ—Ç —Ñ–ª–∞–≥–∞ `ignore_sent_ads` –≤–æ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö
  - –ê–¥–º–∏–Ω-—É—Ç–∏–ª–∏—Ç–∞ –æ—á–∏—Å—Ç–∫–∏ sent_ads:
    - –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `delete_sent_ads_for_user()` –≤ `database_turso.py`
    - –°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/admin_clear_sent <telegram_id>` –≤ `bot/handlers/admin.py`
    - –ó–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥–æ–π —á–µ—Ä–µ–∑ `is_admin()`
  - –†–µ–∑—É–ª—å—Ç–∞—Ç:
    - `is_ad_sent_to_user` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `False` –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–º–µ—á–µ–Ω—ã
    - Debug-run —Å –æ—á–∏—â–µ–Ω–Ω—ã–º–∏ sent_ads –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    - –ë–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–ø—É—Å–∫–æ–≤ "–≤—Å—ë —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
    - –õ–æ–≥–∏ `[sent_check]` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ ID –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 134+ (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π: 4 —Ñ–∞–π–ª–∞)
- **–°—Ç—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–æ:** +13,819+ (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π: +73)
- **–°—Ç—Ä–æ–∫ —É–¥–∞–ª–µ–Ω–æ:** -1,155 (—Ç–µ–∫—É—â–∏–π –¥–µ–ø–ª–æ–π: -21)
- **–¢–µ—Å—Ç–æ–≤:** 90 (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç)
- **–ö–æ–º–º–∏—Ç–æ–≤:** 32+ (–≤–∫–ª—é—á–∞—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞, –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è HTTPClient, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É, —É–ª—É—á—à–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–æ–¥–∞–≤—Ü–æ–≤, —É–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–ª—É—á—à–µ–Ω–Ω—É—é –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é, scoring –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—é, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Å—Ç–∞–Ω—Ç, —É–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, —É–ª—É—á—à–µ–Ω–∏—è –≤ database_turso, DEBUG —Ä–µ–∂–∏–º, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ DEBUG —Ä–µ–∂–∏–º–∞, —É–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤, –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã user_filters, –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ user_id ‚Üí telegram_id, –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç telegram_id —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏, —É–ª—É—á—à–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ users, –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç set_user_filters, –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤ Turso, –µ–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤)

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –¥–µ–ø–ª–æ—è
–ï—Å–ª–∏ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (Railway, Render, Fly.io):
- ‚úÖ **–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–º–µ—Ä–∂–µ–Ω—ã –≤ `main`** - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—Å—Ç–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ
- **–°—Ç–∞—Ç—É—Å:** –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –≤–µ—Ç–∫–µ `main` –∏ –≥–æ—Ç–æ–≤—ã –∫ –¥–µ–ø–ª–æ—é

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start` –±–æ—Ç—É –≤ Telegram
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã `/help` –∏ `/sources`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `logs/app.log` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ CI/CD
- GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç —Ç–µ—Å—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ `.github/workflows/tests.yml`
- –í—Å–µ 90 —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ

## –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:

```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–º–º–∏—Ç –≤ main
git log --oneline origin/main

# –û—Ç–∫–∞—Ç–∏—Ç–µ—Å—å –∫ –Ω—É–∂–Ω–æ–º—É –∫–æ–º–º–∏—Ç—É
git reset --hard <commit_hash>

# –ó–∞–ø—É—à—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git push origin main --force
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –¥–µ–ø–ª–æ—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `README.md` –∏ `DEPLOY.md`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –≤ GitHub Actions
